{% extends 'html/base.html' %} {% load static %} {% block detail_content %}
<head>
  <link rel="stylesheet" href="{% static 'assets/item.css' %}" />
</head>
<body>
  <div class="ads"></div>
  {% for product in products %}
  <div class="frame_1">
    <div class="float_left">
      <img class="detail_img" src="{{ product.ImageURL }}" />
    </div>

    <div class="float_right">
      <div>
        <h1>{{ product.name }}</h1>
        <br />
        <h3 class="frame_0">Hàng nhập khẩu từ Nhật Bản 100%</h3>
        <h3 class="frame_0">Cam kết chính hãng</h3>
      </div>
      <div>
        <a class="border_right" href="#star">
          <span class="number1">
            {% for i in 1|add:0.5|floatformat:"1" %} {% if avg_rate >= i %}
            <span class="fa fa-star checked"></span>
            {% else %}
            <span class="fa fa-star"></span>
            {% endif %} {% endfor %}
          </span>
        </a>
        <a class="border_right" href="#star">
          <u class="text_color2">250</u>
          <span class="text_color1">Đánh giá</span>
        </a>
        <a>
          <span class="text_color2">200</span>
          <span class="text_color1">Đã bán</span>
        </a>
        <p class="number3">
          <span id="money">{{ product.price }}</span> VNĐ<span
            class="text_color3"
            >Giảm {{ product.sale }}</span
          >
        </p>
      </div>
      <div>
        <table>
          <tr>
            <td>Mã Giảm Giá</td>
            <td class="frame_2">10k</td>
            <td class="frame_2">20k</td>
            <td class="frame_2">50k</td>
          </tr>
          <tr class="frame_3">
            <td>Vận chuyển</td>
            <td colspan="3">Miễn phí trong khu vực TP.HCM</td>
          </tr>
          <tr>
            <td>
              {% if user.is_authenticated %}
              <div class="button-container">
                <button
                  data-product="{{ product.ID }}"
                  data-action="add"
                  class="update-cart"
                >
                  <a href="{% url 'cart' %}"> Mua Ngay </a>
                </button>
              </div>
              {% else %}
              <div class="button-container">
                <button
                  data-product="{{ product.ID }}"
                  data-action="add"
                  class="update-cart"
                >
                  <a href="{% url 'login' %}"> Mua Ngay </a>
                </button>
              </div>
              {% endif %}
            </td>
          </tr>
        </table>
      </div>
    </div>
  </div>
  <div class="clr"></div>
  <div class="detail_item1">
    <h2 class="detail_item_title">CHI TIẾT SẢN PHẨM</h2>
  </div>
  <div class="detail_item2">
    <div>Danh Mục</div>
    <div>Đồ chơi</div>
    <div>Số lượng</div>
    <div>1000</div>
    <div>Chất lượng</div>
    <div>mô hình nhựa</div>
  </div>
  <div class="detail_item1">
    <h2 class="detail_item_title">MÔ TẢ SẢN PHẨM</h2>
  </div>
  <p class="detail_item3">
    Sản Phẩm Mô Hình Gundam barbatos làm từ Nhựa Cao Cấp Với Độ Sắc Nét Cao
    <br />
    An Toàn Với Trẻ Em <br />
    Phát Triển Trí Não Cho Trẻ Hiệu Quả Đi Đôi Với Niềm Vui Thích Bất Tận <br />
    Rèn Luyện Tính Kiên Nhẫn Cho Người Chơi <br />
    Tính trang trí trưng bày cao. <br />
    Thông Tin Cơ Bản : <br />
    Mô Hình Gundam barbatos (Gunpla) Là Một Loại Mô Hình Nhựa Được Gọi Là Model
    Kit, Bao Gồm Nhiều Mảnh Nhựa Rời Được <br />
    Gọi Là Part (Bộ Phận), Khi Lắp Ráp Các Part Lại Với Nhau Sẽ Được Mô Hình
    Hoàn Chỉnh. Các Mảnh Nhựa Rời Này Được <br />
    Gắn Trên Khung Nhựa Gọi Là Runner. Mỗi Một Hộp Sản Phẩm Gunpla Bao Gồm Nhiều
    Runner Và Các Phụ Kiện Liên Quan, Một <br />
    Tập Sách Nhỏ (Manual) Bên Trong Giới Thiệu Sơ Lược Về Mẫu Gundam Trong Hộp
    Và Phần Hướng Dẫn Cách Lắp Ráp. <br />
    Dòng Gundam Với Các Chi Tiết Hoàn Hảo. <br />
    Các Khớp Cử Động Linh Hoạt Theo Ý Muốn. <br />
    Người Chơi Sẽ Thỏa Sức Sáng Tạo Và Đam Mê. <br />
  </p>

  <div class="detail_item1">
    <h2 class="detail_item_title">Đánh giá sản phẩm</h2>
  </div>
  <div class="detail_item3">
    <p>Đánh giá trung bình:</p>
    <p class="star">
      {% for i in 1|add:0.5|floatformat:"1" %} {% if avg_rate >= i %}
      <span class="fa fa-star checked"></span>
      {% else %}
      <span class="fa fa-star"></span>
      {% endif %} {% endfor %}
    </p>
  </div>
  <div>
    {% if user.is_authenticated %}
    <div class="detail_item3">
      <div class="stars">
        <form action="{% url 'review' %}" method="GET">
          <input
            type="hidden"
            value="{{ product.ID }}"
            id="prod_id"
            name="prod_id"
          />
          <h2>Bình Luận</h2>
          <div class="rating">
            <input
              type="radio"
              class="star star-5"
              id="star-5"
              name="star"
              value="5"
            />
            <label class="star star-5" for="star-5"></label>

            <input
              type="radio"
              class="star star-4-5"
              id="star-4-5"
              name="star"
              value="4.5"
            />
            <label class="half star-4-5" for="star-4-5"></label>

            <input
              type="radio"
              class="star star-4"
              id="star-4"
              name="star"
              value="4"
            />
            <label class="star star-4" for="star-4"></label>

            <input
              type="radio"
              class="star star-3-5"
              id="star-3-5"
              name="star"
              value="3.5"
            />
            <label class="half star-3-5" for="star-3-5"></label>

            <input
              type="radio"
              class="star star-3"
              id="star-3"
              name="star"
              value="3"
            />
            <label class="star star-3" for="star-3"></label>

            <input
              type="radio"
              class="star star-2-5"
              id="star-2-5"
              name="star"
              value="2.5"
            />
            <label class="half star-2-5" for="star-2-5"></label>

            <input
              type="radio"
              class="star star-2"
              id="star-2"
              name="star"
              value="2"
            />
            <label class="star star-2" for="star-2"></label>

            <input
              type="radio"
              class="star star-1-5"
              id="star-1-5"
              name="star"
              value="1.5"
            />
            <label class="half star-1-5" for="star-1-5"></label>

            <input
              type="radio"
              class="star star-1"
              id="star-1"
              name="star"
              value="1"
            />
            <label class="star star-1" for="star-1"></label>

            <input
              type="radio"
              class="star star-0-5"
              id="star-0-5"
              name="star"
              value="0.5"
            />
            <label class="half star-0-5" for="star-0-5"></label>
          </div>

          <div>
            <textarea
              class="comment_textarea"
              name="comment"
              id="comment"
              placeholder="Nhập bình luận của bạn ở đây"
            ></textarea>
          </div>
          <button type="submit">Bình luận</button>
        </form>
      </div>
    </div>
    <div class="detail_item3">
      {% for review in reviews %}
      <p class="user">{{ review.user.username }}</p>
      <p class="star star-comment">
        {% for i in 1|add:0.5|floatformat:"1" %} {% if review.rate >= i %}
        <span class="fa fa-star checked"></span>
        {% else %}
        <span class="fa fa-star"></span>
        {% endif %} {% endfor %}
      </p>
      <p class="datetime">{{ review.created_at }}</p>
      <p class="comment">{{ review.comment }}</p>
      <hr />
      {% endfor %}
    </div>
    {% else %}
    <div class="detail_item3">
      {% for review in reviews %}
      <p class="user">{{ review.user.username }}</p>
      <p class="star star-comment">
        {% for i in 1|add:0.5|floatformat:"1" %} {% if review.rate >= i %}
        <span class="fa fa-star checked"></span>
        {% else %}
        <span class="fa fa-star"></span>
        {% endif %} {% endfor %}
      </p>
      <p class="datetime">{{ review.created_at }}</p>
      <p class="comment">{{ review.comment }}</p>
      <hr />
      {% endfor %}
    </div>
    {% endif %}
  </div>
</body>

{% endfor %} {% endblock detail_content %}
